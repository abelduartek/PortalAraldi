import{a as U}from"./chunk-PZY37AG5.js";import{a as B,b as R}from"./chunk-XKTK3IWF.js";import{a as A,b as Y}from"./chunk-4YQRIOBB.js";import{a as J,b as H}from"./chunk-CGJ4C2IJ.js";import{a as z,b as V,j,k as q,n as N,o as Q}from"./chunk-7F2FX24T.js";import{H as W,J as L,y as I}from"./chunk-ZOL5ZLUF.js";import{d as E,g as F,k as T}from"./chunk-KRKX4DJQ.js";import{Ab as D,Bb as l,Cb as M,Gb as f,Ha as s,Hb as _,Ib as C,Ma as w,Sa as O,Xa as b,Z as y,_ as P,gb as c,hb as t,ib as n,jb as g,mc as x,nb as v,nc as S,ob as u,pb as h,qc as k}from"./chunk-QFKUKTN6.js";function Z(r,p){if(r&1){let o=v();t(0,"button",39),u("click",function(){let a=y(o).$implicit,e=h();return P(e.selectQuickPeriod(a.value))}),n()}if(r&2){let o=p.$implicit,i=h();D("quick-filter-btn "+(i.selectedQuickPeriod===o.value?"active":"")),c("label",o.label)}}function G(r,p){if(r&1&&(t(0,"div",40)(1,"div",41)(2,"p-card",42)(3,"div",43)(4,"div",44),g(5,"i",45),n(),t(6,"div",46)(7,"h3"),l(8),n(),t(9,"p"),l(10,"Total Receitas do Per\xEDodo"),n()()()(),t(11,"p-card",47)(12,"div",43)(13,"div",44),g(14,"i",48),n(),t(15,"div",46)(16,"h3"),l(17),n(),t(18,"p"),l(19,"Total Despesas do Per\xEDodo"),n()()()(),t(20,"p-card",49)(21,"div",43)(22,"div",44),g(23,"i",50),n(),t(24,"div",46)(25,"h3"),l(26),n(),t(27,"p"),l(28,"Fluxo de Caixa"),n()()()(),t(29,"p-card",51)(30,"div",43)(31,"div",44),g(32,"i",52),n(),t(33,"div",46)(34,"h3"),l(35),n(),t(36,"p"),l(37,"Itens Pendentes"),n()()()()()()),r&2){let o=h();s(8),M(o.formatCurrency(o.dashboardData.totalReceitas)),s(9),M(o.formatCurrency(o.dashboardData.totalDespesas)),s(9),M(o.formatCurrency(o.dashboardData.fluxoCaixa)),s(9),M(o.dashboardData.itensPendentes)}}function K(r,p){if(r&1){let o=v();t(0,"div",53)(1,"h3"),l(2,"Evolu\xE7\xE3o do Resultado L\xEDquido"),n(),t(3,"div",54)(4,"p-selectButton",55),C("ngModelChange",function(a){y(o);let e=h();return _(e.selectedChartView,a)||(e.selectedChartView=a),P(a)}),u("onChange",function(){y(o);let a=h();return P(a.updateChartView())}),n()()()}if(r&2){let o=h();s(4),c("options",o.chartViewOptions),f("ngModel",o.selectedChartView)}}function X(r,p){r&1&&(t(0,"h3"),l(1,"Alertas e Notifica\xE7\xF5es"),n())}function $(r,p){if(r&1&&(t(0,"div",58),g(1,"p-tag",59),n()),r&2){let o=p.$implicit,i=h(2);s(),c("severity",i.getAlertSeverity(o))("value",o)}}function ee(r,p){if(r&1&&(t(0,"div",56),b(1,$,2,2,"div",57),n()),r&2){let o=h();s(),c("ngForOf",o.dashboardData.alertas)}}var Pe=(()=>{let p=class p{constructor(i){this.mockDataService=i,this.filters={dataInicio:null,dataFim:null,cnpj:null,tipoReceita:null,centroCusto:null},this.cnpjOptions=[{label:"Todos os CNPJs",value:null},{label:"Araldi Pizzaria Centro",value:"12.345.678/0001-90"},{label:"Araldi Pizzaria Shopping",value:"12.345.678/0002-71"},{label:"Araldi Delivery",value:"12.345.678/0003-52"}],this.receitaOptions=[{label:"Todos os tipos",value:null},{label:"Rod\xEDzio",value:"rodizio"},{label:"Delivery",value:"delivery"},{label:"Eventos",value:"eventos"}],this.centroCustoOptions=[{label:"Todos os centros",value:null},{label:"Produ\xE7\xE3o",value:"producao"},{label:"Delivery",value:"delivery"},{label:"Administrativo",value:"administrativo"}],this.chartViewOptions=[{label:"Mensal",value:"monthly"},{label:"YoY",value:"yoy"}],this.selectedChartView="monthly",this.quickPeriods=[{label:"Hoje",value:"today"},{label:"Esta Semana",value:"thisWeek"},{label:"Este M\xEAs",value:"thisMonth"},{label:"\xDAltimos 30 dias",value:"last30Days"},{label:"Este Ano",value:"thisYear"}],this.selectedQuickPeriod="thisMonth"}ngOnInit(){this.loadDashboardData(),this.initChart(),this.setDefaultDateRange()}setDefaultDateRange(){let i=new Date,a=new Date(i.getFullYear(),i.getMonth(),1),e=new Date(i.getFullYear(),i.getMonth()+1,0);this.filters.dataInicio=a,this.filters.dataFim=e}selectQuickPeriod(i){this.selectedQuickPeriod=i;let a=new Date;switch(i){case"today":this.filters.dataInicio=new Date(a),this.filters.dataFim=new Date(a);break;case"thisWeek":let e=new Date(a);e.setDate(a.getDate()-a.getDay());let m=new Date(a);m.setDate(a.getDate()+(6-a.getDay())),this.filters.dataInicio=e,this.filters.dataFim=m;break;case"thisMonth":this.filters.dataInicio=new Date(a.getFullYear(),a.getMonth(),1),this.filters.dataFim=new Date(a.getFullYear(),a.getMonth()+1,0);break;case"last30Days":this.filters.dataInicio=new Date(a.getTime()-30*24*60*60*1e3),this.filters.dataFim=new Date(a);break;case"thisYear":this.filters.dataInicio=new Date(a.getFullYear(),0,1),this.filters.dataFim=new Date(a.getFullYear(),11,31);break}this.applyFilters()}onDateChange(){this.selectedQuickPeriod="",this.applyFilters()}loadDashboardData(){this.mockDataService.getDashboardData().subscribe(i=>{this.dashboardData=i,this.updateChartData()})}applyFilters(){console.log("Aplicando filtros:",this.filters),this.loadDashboardData()}clearFilters(){this.filters={dataInicio:null,dataFim:null,cnpj:null,tipoReceita:null,centroCusto:null},this.setDefaultDateRange(),this.applyFilters()}updateChartView(){this.updateChartData()}initChart(){this.chartOptions={responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:this.getChartTitle()}},scales:{y:{beginAtZero:!0,ticks:{callback:function(i){return"R$ "+i.toLocaleString("pt-BR")}}}}}}getChartTitle(){return this.selectedChartView==="yoy"?"Comparativo Ano a Ano - Resultado L\xEDquido":"Evolu\xE7\xE3o Mensal - Resultado L\xEDquido"}updateChartData(){this.dashboardData&&(this.selectedChartView==="yoy"?this.updateYoYChartData():this.updateMonthlyChartData(),this.chartOptions&&this.chartOptions.plugins&&this.chartOptions.plugins.title&&(this.chartOptions.plugins.title.text=this.getChartTitle()))}updateMonthlyChartData(){this.chartData={labels:this.dashboardData.evolucaoResultado.map(i=>i.mes),datasets:[{label:"Resultado L\xEDquido",data:this.dashboardData.evolucaoResultado.map(i=>i.valor),borderColor:"#42A5F5",backgroundColor:"rgba(66, 165, 245, 0.2)",tension:.4,fill:!0}]}}updateYoYChartData(){let i=[89260.45,95420.3,87650.2,102340.15,98750.6,105890.25],a=[82150.3,88920.15,91200.45,95680.2,89340.75,98450.6];this.chartData={labels:["Jan","Fev","Mar","Abr","Mai","Jun"],datasets:[{label:"2024",data:i,borderColor:"#42A5F5",backgroundColor:"rgba(66, 165, 245, 0.2)",tension:.4,fill:!1},{label:"2023",data:a,borderColor:"#FFA726",backgroundColor:"rgba(255, 167, 38, 0.2)",tension:.4,fill:!1}]}}formatCurrency(i){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(i)}getAlertSeverity(i){return i.includes("pendentes")?"warning":i.includes("sem nota")?"danger":(i.includes("acima da m\xE9dia"),"info")}};p.\u0275fac=function(a){return new(a||p)(w(U))},p.\u0275cmp=O({type:p,selectors:[["app-dashboard"]],decls:64,vars:18,consts:[[1,"dashboard"],[1,"dashboard-header"],[1,"filters-section"],[1,"filters-card"],[1,"filters-header"],[1,"pi","pi-filter"],[1,"filters-content"],[1,"quick-filters"],["pButton","",3,"label","class","click",4,"ngFor","ngForOf"],[1,"filters-grid"],[1,"filter-item"],[1,"pi","pi-calendar"],[1,"date-range-container"],[1,"date-input-group"],["dateFormat","dd/mm/yy","placeholder","Data in\xEDcio","inputId","dataInicio",3,"ngModelChange","onSelect","ngModel","showIcon"],["dateFormat","dd/mm/yy","placeholder","Data fim","inputId","dataFim",3,"ngModelChange","onSelect","ngModel","showIcon"],[1,"pi","pi-building"],["optionLabel","label","optionValue","value","placeholder","Selecione o CNPJ",3,"ngModelChange","onChange","options","ngModel","showClear"],[1,"pi","pi-money-bill"],["optionLabel","label","optionValue","value","placeholder","Selecione o tipo",3,"ngModelChange","onChange","options","ngModel","showClear"],[1,"pi","pi-sitemap"],["optionLabel","label","optionValue","value","placeholder","Selecione o centro",3,"ngModelChange","onChange","options","ngModel","showClear"],[1,"filters-actions"],[1,"filters-actions-left"],["pButton","","label","Aplicar Filtros","icon","pi pi-check",1,"filter-button","p-button-primary",3,"click"],["pButton","","label","Limpar Tudo","icon","pi pi-times",1,"filter-button","p-button-secondary",3,"click"],[1,"filters-actions-right"],[1,"pi","pi-check-circle"],["class","dashboard-cards",4,"ngIf"],[1,"dashboard-content"],[1,"chart-section"],["pTemplate","header"],["type","line","width","100%","height","400px",3,"data","options"],[1,"alerts-section"],["class","alerts-list",4,"ngIf"],[1,"dashboard-actions"],["pButton","","label","Categorizar Itens Pendentes","icon","pi pi-tags","routerLink","/categorizacao",1,"p-button-warning"],["pButton","","label","Importar Novas Notas","icon","pi pi-download","routerLink","/importacao-notas",1,"p-button-primary"],["pButton","","label","Ver Relat\xF3rios","icon","pi pi-chart-bar","routerLink","/relatorios",1,"p-button-secondary"],["pButton","",3,"click","label"],[1,"dashboard-cards"],[1,"card-row"],[1,"dashboard-card","receitas"],[1,"card-content"],[1,"card-icon"],[1,"pi","pi-arrow-up"],[1,"card-info"],[1,"dashboard-card","despesas"],[1,"pi","pi-arrow-down"],[1,"dashboard-card","fluxo-caixa"],[1,"pi","pi-wallet"],[1,"dashboard-card","pendentes"],[1,"pi","pi-exclamation-triangle"],[1,"chart-header"],[1,"chart-controls"],["optionLabel","label","optionValue","value",3,"ngModelChange","onChange","options","ngModel"],[1,"alerts-list"],["class","alert-item",4,"ngFor","ngForOf"],[1,"alert-item"],[3,"severity","value"]],template:function(a,e){a&1&&(t(0,"div",0)(1,"div",1)(2,"h2"),l(3,"Dashboard Financeiro"),n(),t(4,"p"),l(5,"Vis\xE3o geral das finan\xE7as da Araldi Pizzaria"),n()(),t(6,"div",2)(7,"div",3)(8,"div",4)(9,"h3"),g(10,"i",5),l(11," Filtros de An\xE1lise "),n()(),t(12,"div",6)(13,"div",7),b(14,Z,1,3,"button",8),n(),t(15,"div",9)(16,"div",10)(17,"label"),g(18,"i",11),l(19," Per\xEDodo Personalizado "),n(),t(20,"div",12)(21,"div",13)(22,"p-calendar",14),C("ngModelChange",function(d){return _(e.filters.dataInicio,d)||(e.filters.dataInicio=d),d}),u("onSelect",function(){return e.onDateChange()}),n()(),t(23,"div",13)(24,"span"),l(25,"at\xE9"),n(),t(26,"p-calendar",15),C("ngModelChange",function(d){return _(e.filters.dataFim,d)||(e.filters.dataFim=d),d}),u("onSelect",function(){return e.onDateChange()}),n()()()(),t(27,"div",10)(28,"label"),g(29,"i",16),l(30," CNPJ "),n(),t(31,"p-dropdown",17),C("ngModelChange",function(d){return _(e.filters.cnpj,d)||(e.filters.cnpj=d),d}),u("onChange",function(){return e.applyFilters()}),n()(),t(32,"div",10)(33,"label"),g(34,"i",18),l(35," Tipo de Receita "),n(),t(36,"p-dropdown",19),C("ngModelChange",function(d){return _(e.filters.tipoReceita,d)||(e.filters.tipoReceita=d),d}),u("onChange",function(){return e.applyFilters()}),n()(),t(37,"div",10)(38,"label"),g(39,"i",20),l(40," Centro de Custo "),n(),t(41,"p-dropdown",21),C("ngModelChange",function(d){return _(e.filters.centroCusto,d)||(e.filters.centroCusto=d),d}),u("onChange",function(){return e.applyFilters()}),n()()(),t(42,"div",22)(43,"div",23)(44,"button",24),u("click",function(){return e.applyFilters()}),n(),t(45,"button",25),u("click",function(){return e.clearFilters()}),n()(),t(46,"div",26),g(47,"i",27),t(48,"span"),l(49,"Filtros aplicados automaticamente"),n()()()()()(),b(50,G,38,4,"div",28),t(51,"div",29)(52,"div",30)(53,"p-card"),b(54,K,5,2,"ng-template",31),g(55,"p-chart",32),n()(),t(56,"div",33)(57,"p-card"),b(58,X,2,0,"ng-template",31)(59,ee,2,1,"div",34),n()()(),t(60,"div",35),g(61,"button",36)(62,"button",37)(63,"button",38),n()()),a&2&&(s(14),c("ngForOf",e.quickPeriods),s(8),f("ngModel",e.filters.dataInicio),c("showIcon",!0),s(4),f("ngModel",e.filters.dataFim),c("showIcon",!0),s(5),c("options",e.cnpjOptions),f("ngModel",e.filters.cnpj),c("showClear",!0),s(5),c("options",e.receitaOptions),f("ngModel",e.filters.tipoReceita),c("showClear",!0),s(5),c("options",e.centroCustoOptions),f("ngModel",e.filters.centroCusto),c("showClear",!0),s(9),c("ngIf",e.dashboardData),s(5),c("data",e.chartData)("options",e.chartOptions),s(4),c("ngIf",e.dashboardData))},dependencies:[k,x,S,V,z,I,R,B,L,W,Y,A,q,j,Q,N,H,J,T,E,F],styles:[".dashboard[_ngcontent-%COMP%]{padding:2rem}.dashboard-header[_ngcontent-%COMP%]{margin-bottom:2rem}.dashboard-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 .5rem;color:#2c3e50;font-size:2rem;font-weight:600}.dashboard-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#6c757d;font-size:1.1rem}.filters-section[_ngcontent-%COMP%]{margin-bottom:2rem}.filters-card[_ngcontent-%COMP%]{border-radius:16px;box-shadow:0 4px 12px #00000014;border:1px solid #e9ecef;overflow:hidden}.filters-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9fa,#e9ecef);padding:1.5rem 2rem;border-bottom:1px solid #dee2e6}.filters-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#2c3e50;font-size:1.2rem;font-weight:600;display:flex;align-items:center;gap:.5rem}.filters-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#667eea;font-size:1.1rem}.filters-content[_ngcontent-%COMP%]{padding:2rem;background:#fff}.filters-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:2rem;margin-bottom:1.5rem}.filter-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem;position:relative}.filter-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:#2c3e50;font-size:.95rem;display:flex;align-items:center;gap:.5rem}.filter-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#667eea;font-size:.9rem}.date-range-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.date-input-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.date-input-group[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#6c757d;font-size:.85rem;font-weight:500;min-width:20px;text-align:center}.filter-item[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:deep(.p-calendar), .filter-item[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:deep(.p-dropdown){width:100%}.filter-item[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:deep(.p-inputtext), .filter-item[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:deep(.p-dropdown-label){border-radius:8px;border:2px solid #e9ecef;padding:.75rem 1rem;font-size:.95rem;transition:all .3s ease}.filter-item[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:deep(.p-inputtext:focus), .filter-item[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:deep(.p-dropdown:not(.p-disabled).p-focus){border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.filter-item[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:deep(.p-dropdown-panel){border-radius:8px;box-shadow:0 8px 25px #00000026;border:1px solid #e9ecef}.filters-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding-top:1rem;border-top:1px solid #f1f3f4}.filters-actions-left[_ngcontent-%COMP%]{display:flex;gap:1rem}.filters-actions-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:#6c757d;font-size:.85rem}.filters-actions-right[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#28a745;font-size:.9rem}.filter-button[_ngcontent-%COMP%]{padding:.75rem 1.5rem!important;border-radius:8px!important;font-weight:600!important;font-size:.9rem!important;transition:all .3s ease!important;border:2px solid transparent!important}.filter-button.p-button-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2)!important;border-color:transparent!important}.filter-button.p-button-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px)!important;box-shadow:0 8px 20px #667eea4d!important}.filter-button.p-button-secondary[_ngcontent-%COMP%]{background:#fff!important;color:#6c757d!important;border-color:#dee2e6!important}.filter-button.p-button-secondary[_ngcontent-%COMP%]:hover{background:#f8f9fa!important;color:#495057!important;border-color:#adb5bd!important}.quick-filters[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-wrap:wrap;margin-bottom:1.5rem}.quick-filter-btn[_ngcontent-%COMP%]{padding:.5rem 1rem!important;border-radius:20px!important;font-size:.85rem!important;font-weight:500!important;background:#f8f9fa!important;color:#6c757d!important;border:1px solid #dee2e6!important;transition:all .3s ease!important}.quick-filter-btn[_ngcontent-%COMP%]:hover{background:#667eea!important;color:#fff!important;border-color:#667eea!important;transform:translateY(-1px)!important}.quick-filter-btn.active[_ngcontent-%COMP%]{background:#667eea!important;color:#fff!important;border-color:#667eea!important}.chart-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem}.chart-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#2c3e50}.chart-controls[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:center}.dashboard-cards[_ngcontent-%COMP%]{margin-bottom:2rem}.card-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1.5rem}.dashboard-card[_ngcontent-%COMP%]{border-radius:12px;box-shadow:0 4px 6px #0000001a;transition:transform .2s ease,box-shadow .2s ease}.dashboard-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 15px #00000026}.card-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1rem}.card-icon[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.5rem;color:#fff}.receitas[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4caf50,#45a049)}.despesas[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f44336,#d32f2f)}.fluxo-caixa[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2196f3,#1976d2)}.pendentes[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff9800,#f57c00)}.card-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:1.8rem;font-weight:700;color:#2c3e50}.card-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#6c757d;font-size:.9rem}.dashboard-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr;gap:2rem;margin-bottom:2rem}.chart-section[_ngcontent-%COMP%]   p-card[_ngcontent-%COMP%], .alerts-section[_ngcontent-%COMP%]   p-card[_ngcontent-%COMP%]{height:100%}.alerts-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.alert-item[_ngcontent-%COMP%]{padding:.5rem 0}.dashboard-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:center;flex-wrap:wrap}.dashboard-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:200px}@media (max-width: 768px){.dashboard-content[_ngcontent-%COMP%], .card-row[_ngcontent-%COMP%], .filters-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.chart-header[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;align-items:stretch}.dashboard-actions[_ngcontent-%COMP%]{flex-direction:column;align-items:center}}"]});let r=p;return r})();export{Pe as DashboardComponent};
